@page "/employees"
@using Shared.Models.Employee
@attribute [StreamRendering]


<MudTable Items="_employees" T="EmployeeResponse" Elevation="0" OnRowClick="@(async (x)=> await OnRowClickEventHandler(x))">
    <HeaderContent>
        <MudTh><MudTableSortLabel SortBy="@EmployeeFunction.SortById">Id</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@EmployeeFunction.SortByFirstname">Firstname</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@EmployeeFunction.SortByLastname">Lastname</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@EmployeeFunction.SortByEmail">Email</MudTableSortLabel></MudTh>
        <MudTh Style="text-align: center">Active</MudTh>
        <MudTh Style="text-align: center">Attendances</MudTh>
        <MudTh Style="text-align: center">Payroll</MudTh>
        <MudTh Style="text-align: center">Action</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="Firstname">@context.FirstName</MudTd>
        <MudTd DataLabel="Lastname">@context.LastName</MudTd>
        <MudTd DataLabel="Email">@context.Email</MudTd>
        <MudTd Style="text-align: center" DataLabel="Active"><MudChip T="string" Color="@(context.IsActive ? Color.Success : Color.Error)">@context.IsActive</MudChip></MudTd>
        <MudTd Style="text-align: center" DataLabel="Attendance"><MudIconButton Icon="@Icons.Material.Filled.ArrowRightAlt" aria-label="goto" Class="pa-0" OnClick="@(() => ShowEmployeeModalAsync(context))"/></MudTd>
        <MudTd Style="text-align: center" DataLabel="Payroll"><MudIconButton Icon="@Icons.Material.Filled.ArrowRightAlt" aria-label="goto" Class="pa-0" OnClick="@(() => ShowEmployeeModalAsync(context))"/></MudTd>
        <MudTd Style="text-align: center" DataLabel="Action"><MudIconButton Icon="@Icons.Material.Filled.Delete" aria-label="goto" Class="pa-0" OnClick="@(() => DeleteEmployeeAsync(context.Id))"/></MudTd>
    </RowTemplate>
</MudTable>
<MudContainer Class="mt-4 d-flex justify-center flex-grow-1 gap-4 py-3">
    <MudPagination SelectedChanged="OnPageChanged" Count="_totalPages"></MudPagination>
    <MudMenu Label="@_currentPageSize.ToString()" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" >
        <MudMenuItem Label="10" OnClick="@(async ()=> await OnPageSizeChanged(10))" />
        <MudMenuItem Label="25" OnClick="@(async ()=> await OnPageSizeChanged(25))" />
        <MudMenuItem Label="50" OnClick="@(async ()=> await OnPageSizeChanged(50))" />
        <MudMenuItem Label="100" OnClick="@(async ()=> await OnPageSizeChanged(100))" />
    </MudMenu>
</MudContainer>



<MudFab Class="fixed" StartIcon="@Icons.Material.Filled.Add"
        Color="Color.Primary" Size="Size.Medium"
        OnClick="@(async () => await ShowEmployeeModalAsync(null))"
        Style="bottom:15px; right: 30px; z-index: 1000;" />


