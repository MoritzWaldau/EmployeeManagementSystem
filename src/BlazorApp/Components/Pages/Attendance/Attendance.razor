@page "/attendances"
@using Shared.Models.Attendance
@attribute [StreamRendering]

<MudTable Items="_attendances" T="AttendanceResponse" Elevation="0" OnRowClick="@(async (x) => await OnRowClickEventHandler(x))">
    <HeaderContent>
        <MudTh><MudTableSortLabel SortBy="@AttendanceFunction.SortById">Id</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@AttendanceFunction.SortByDate">Date</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@AttendanceFunction.SortByCheckInTime">Check in time</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@AttendanceFunction.SortByCheckOutTime">Check out time</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@AttendanceFunction.SortByCheckWorkDuration">Work duration</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="@AttendanceFunction.SortByStatus">Status</MudTableSortLabel></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="Date">@context.Date</MudTd>
        <MudTd DataLabel="CheckInTime">@context.CheckInTime.ToString()</MudTd>
        <MudTd DataLabel="CheckOutTime">@context.CheckOutTime.ToString()</MudTd>
        <MudTd DataLabel="WorkDuration">@context.WorkDuration.ToString()</MudTd>
        <MudTd DataLabel="Status">@context.Status.ToString()</MudTd>
        <MudTd Style="text-align: center" DataLabel="Action"><MudIconButton Icon="@Icons.Material.Filled.Delete" aria-label="goto" Class="pa-0" OnClick="@(() => DeleteAttendanceAsync(context.Id))"/></MudTd>
    </RowTemplate>
</MudTable>

<MudContainer Class="d-flex justify-center flex-grow-1 gap-4 py-3">
    <MudPagination SelectedChanged="OnPageChanged" Count="_totalPages"></MudPagination>
    <MudMenu Label="@_currentPageSize.ToString()" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" >
        <MudMenuItem Label="10" OnClick="@(async ()=> await OnPageSizeChanged(10))" />
        <MudMenuItem Label="25" OnClick="@(async ()=> await OnPageSizeChanged(25))" />
        <MudMenuItem Label="50" OnClick="@(async ()=> await OnPageSizeChanged(50))" />
        <MudMenuItem Label="100" OnClick="@(async ()=> await OnPageSizeChanged(100))" />
    </MudMenu>
</MudContainer>



